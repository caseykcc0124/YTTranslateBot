## 產品需求文件 (PRD) - YouTube 翻譯字幕網站

### 1. 導言

本文件旨在闡述開發 YouTube 翻譯字幕網站的產品需求。該網站將允許用戶輸入 YouTube 影片 URL，並自動處理影片字幕的生成、翻譯和優化，特別是針對繁體中文（台灣習慣用語）的翻譯。

### 2. 產品目標

*   提供一個簡單易用的平台，讓用戶能快速獲得 YouTube 影片的繁體中文字幕。
*   確保翻譯的字幕符合台灣的語言習慣和語境。
*   處理有字幕和無字幕影片的兩種情況，提供全面的字幕解決方案。
*   利用大型語言模型 (LLM) 提升字幕翻譯的品質、語音轉錄的準確性，並優化字幕的時間分段。
*   提供影片播放功能，讓用戶可以直接在網站上觀看翻譯後的影片並調整播放設定。
*   允許用戶自定義 LLM API 設定，提供更高的靈活性。

### 3. 功能特性

#### 3.1. 影片輸入與處理

*   **YouTube URL 輸入**: 用戶可以在網站上輸入任何 YouTube 影片的 URL。
*   **影片下載**: 系統將自動下載與所提供 URL 相關的 YouTube 影片。
*   **影片語系辨識**: 系統將自動辨識影片中的語系。

#### 3.2. 字幕處理流程 (有字幕檔)

*   **字幕檔偵測與使用**: 如果影片本身已有字幕檔（例如：YouTube 提供的原始字幕），系統將優先使用這些字幕。
*   **LLM 翻譯**: 使用大型語言模型 (LLM) 將現有字幕翻譯成繁體中文。
*   **台灣習慣用語優化**: LLM 在翻譯過程中，必須針對台灣地區的習慣用語進行優化，確保翻譯內容自然且符合當地語境。
*   **LLM 字幕時間分段微調**: LLM 將根據翻譯後的內容的上下文語氣和語句通順度，對字幕的時間分段進行微調，確保字幕的顯示時間點與語音同步且閱讀流暢。

#### 3.3. 字幕處理流程 (無字幕檔)

*   **語音辨識 (Speech-to-Text) API**: 如果影片沒有現成字幕，系統將使用語音辨識 API 將影片語音轉錄成文字字幕。
*   **LLM 字幕調整與優化**:
    *   **關鍵字生成**: LLM 將根據影片標題生成相關關鍵字。
    *   **上下文及用語修正**: 利用生成的關鍵字，LLM 將對語音辨識產生的字幕進行調整，修正可能存在的語音辨識錯誤，確保字幕內容的上下文連貫性及用語的流暢性。
    *   **字幕通順性檢查**: 務必確保調整後的字幕檔通順、語法正確。
*   **LLM 字幕時間分段微調**: 在語音轉錄和初步調整後，LLM 將根據字幕內容的上下文語氣和語句通順度，對字幕的時間分段進行微調，確保字幕的顯示時間點與語音同步且閱讀流暢。
*   **LLM 翻譯**: 調整後的字幕將使用 LLM 翻譯成繁體中文。
*   **台灣習慣用語優化**: LLM 在翻譯過程中，必須針對台灣地區的習慣用語進行優化，確保翻譯內容自然且符合當地語境。

#### 3.4. 影片播放與字幕顯示

*   **整合播放器**: 網站必須能夠直接播放翻譯過後的影片，並同步顯示繁體中文字幕。
*   **影片控件**: 播放器應具備類似 YouTube 的標準影片控制功能，例如：
    *   播放/暫停
    *   進度條
    *   音量控制
    *   全螢幕模式
    *   播放速度調整
    *   字幕開關與顯示調整

#### 3.5. LLM API 與 KEY 設定

*   **用戶自定義設定**: 系統應提供介面，允許用戶自行設定 LLM 的 API 端點 (API Endpoint) 和 API 金鑰 (API Key)。
*   **支援多個 LLM**: 未來可能需要考慮支援不同的 LLM 服務商，讓用戶可以選擇偏好的模型。

### 4. 用戶故事

*   **作為一個用戶**，我希望能夠輸入 YouTube 影片 URL，然後快速獲得繁體中文字幕，這樣我就可以更好地理解影片內容。
*   **作為一個學生**，當我觀看外語教學影片時，我希望字幕能夠翻譯成符合台灣習慣的繁體中文，這樣我學習起來會更方便。
*   **作為一個內容創作者**，我希望我的影片能夠自動生成準確且流暢的繁體中文字幕，即使原始影片沒有字幕檔，也能透過語音轉錄和 LLM 優化來實現。
*   **作為一個字幕需求者**，我希望網站能夠自動判斷影片是否有字幕，並根據情況選擇最佳的字幕處理方式，這樣我無需手動判斷。
*   **作為一個用戶**，我希望翻譯後的影片能夠在網站上直接播放，並且可以像 YouTube 一樣調整播放速度，方便我學習或觀看。
*   **作為一個高級用戶**，我希望能夠設定自己的 LLM API 和 Key，以便使用我已有的服務或更高規格的模型。
*   **作為一個觀眾**，我希望字幕的顯示時間能夠與影片內容完美同步，並且語句分段合理，讓我在觀看時有最佳的閱讀體驗。

### 5. 技術要求

*   **前端**: 網頁介面，用於用戶輸入 URL、顯示結果、影片播放器和 LLM 設定介面。
*   **後端**:
    *   **YouTube API/相關庫**: 用於影片資訊獲取及下載。
    *   **語音辨識 API**: 例如 Google Cloud Speech-to-Text, AWS Transcribe, OpenAI Whisper API 等。
    *   **大型語言模型 (LLM)**: 用於字幕的調整、翻譯、台灣習慣用語的優化，以及字幕時間分段的微調。需要選擇能夠支持繁體中文和提供良好翻譯品質的 LLM。
    *   **語系辨識庫**: 用於影片語系偵測。
    *   **影片處理與串流**: 處理下載後的影片，使其能與字幕同步播放。
*   **資料儲存**: 用於暫存影片、字幕檔、處理結果、用戶的 LLM 設定等。
*   **可擴展性**: 系統設計應考慮到未來用戶量的增長和影片處理的負載。
*   **安全性**: 確保用戶設定的 LLM API Key 的儲存與使用安全。

### 6. 未來考慮

*   **多語言支持**: 除了繁體中文，未來可考慮支持其他語言的翻譯。
*   **字幕編輯功能**: 提供用戶手動編輯和修正字幕的介面。
*   **字幕格式導出**: 支持多種字幕格式（如 SRT, VTT）導出。
*   **用戶管理**: 用戶註冊、登錄，保存翻譯歷史記錄。
*   **API 接口**: 開放 API 供其他應用程式集成。
*   **翻譯品質反饋機制**: 讓用戶可以對翻譯品質進行反饋，以便持續優化 LLM 模型。 