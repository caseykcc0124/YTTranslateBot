# å­—å¹•æ™‚é–“è»¸å¾®èª¿åŠŸèƒ½ - å®Œæ•´å¯¦ç¾æ–‡æª”

## ðŸ“‹ åŠŸèƒ½æ¦‚è¿°

å­—å¹•æ™‚é–“è»¸å¾®èª¿åŠŸèƒ½å…è¨±ç”¨æˆ¶å¯¦æ™‚èª¿æ•´å­—å¹•çš„é¡¯ç¤ºæ™‚é–“å’Œæ’­æ”¾é€Ÿåº¦ï¼Œè§£æ±ºå­—å¹•èˆ‡è¦–é »ä¸åŒæ­¥çš„å•é¡Œã€‚æ­¤åŠŸèƒ½å·²å®Œæ•´æ•´åˆåˆ° YouTube è¦–é »æ’­æ”¾å™¨ä¸­ã€‚

## ðŸŽ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. å­—å¹•åç§»èª¿æ•´ (Subtitle Offset)
- **ç¯„åœ**: -10ç§’ åˆ° +10ç§’
- **ç²¾åº¦**: 0.1ç§’
- **ç”¨é€”**: ä¿®æ­£å­—å¹•èˆ‡è¦–é »çš„æ™‚é–“å·®

### 2. æ’­æ”¾é€Ÿåº¦èª¿æ•´ (Speed Rate)
- **ç¯„åœ**: 0.8x åˆ° 1.2x
- **ç²¾åº¦**: 0.01x
- **ç”¨é€”**: èª¿æ•´å­—å¹•çš„æ’­æ”¾ç¯€å¥

### 3. å¿«æ·éµæ”¯æ´
- `Shift + â†` : å­—å¹•æå‰ 0.5ç§’
- `Shift + â†’` : å­—å¹•å»¶å¾Œ 0.5ç§’
- `Shift + â†‘` : åŠ å¿«å­—å¹•é€Ÿåº¦ 0.05x
- `Shift + â†“` : æ¸›æ…¢å­—å¹•é€Ÿåº¦ 0.05x
- `Shift + 0` : é‡è¨­æ‰€æœ‰èª¿æ•´

## ðŸ—ï¸ æŠ€è¡“å¯¦ç¾

### çµ„ä»¶çµæ§‹

#### 1. SubtitleTimingPanel (`subtitle-timing-panel.tsx`)
ä¸»è¦çš„æ™‚é–“è»¸èª¿æ•´é¢æ¿çµ„ä»¶ï¼ŒåŒ…å«ï¼š
- åç§»é‡æ»‘æ¡¿å’Œå¿«é€ŸæŒ‰éˆ•
- é€Ÿåº¦èª¿æ•´æ»‘æ¡¿å’Œé è¨­æŒ‰éˆ•
- ä½¿ç”¨èªªæ˜ŽæŠ˜ç–Šé¢æ¿
- å•Ÿç”¨/ç¦ç”¨é–‹é—œ

#### 2. æ™‚é–“è¨ˆç®—é‚è¼¯
```typescript
// åå‘è¨ˆç®—åŽŸå§‹æ™‚é–“
const originalTime = (videoTime - timing.offset) * timing.speedRate;

// æŸ¥æ‰¾å°æ‡‰å­—å¹•
const currentSubtitle = subtitles.find(sub => 
  originalTime >= sub.start && originalTime <= sub.end
);
```

### æ•¸æ“šçµæ§‹

```typescript
interface SubtitleTimingControls {
  offset: number;        // -10 åˆ° +10 ç§’
  speedRate: number;     // 0.8 åˆ° 1.2 å€é€Ÿ
  enabled: boolean;      // æ˜¯å¦å•Ÿç”¨æ™‚é–“èª¿æ•´
}
```

### æœ¬åœ°å­˜å„²
- ä½¿ç”¨ `localStorage` ä¿å­˜ç”¨æˆ¶çš„èª¿æ•´è¨­å®š
- éµå: `ytTranslateBot-subtitleTiming`
- é é¢é‡è¼‰å¾Œè‡ªå‹•æ¢å¾©è¨­å®š

## ðŸŽ¨ UI/UX è¨­è¨ˆ

### è¦–è¦ºå±¤ç´š
1. **æœ€å°åŒ–ç‹€æ…‹**: åœ¨æ’­æ”¾æŽ§åˆ¶åˆ—é¡¯ç¤ºç°¡æ½”æŒ‰éˆ•ï¼ŒåŒ…å«ç•¶å‰èª¿æ•´å€¼çš„å¾½ç« 
2. **å±•é–‹é¢æ¿**: å›ºå®šåœ¨å³ä¸‹è§’çš„å®Œæ•´æŽ§åˆ¶é¢æ¿

### è¦–è¦ºå›žé¥‹
- èª¿æ•´å€¼ä¸ç‚ºé è¨­æ™‚ï¼ŒæŒ‰éˆ•è®Šè‰²æç¤º
- å³æ™‚é¡¯ç¤ºç•¶å‰åç§»å’Œé€Ÿåº¦å€¼
- èª¿è©¦æ¨¡å¼ä¸‹é¡¯ç¤ºè©³ç´°è¨ˆç®—è³‡è¨Š

### éŸ¿æ‡‰å¼è¨­è¨ˆ
- é¢æ¿å¯¬åº¦: 384px (w-96)
- è‡ªé©æ‡‰ä¸åŒèž¢å¹•å°ºå¯¸
- ä¸é®æ“‹è¦–é »å…§å®¹

## ðŸ“Š èª¿è©¦è³‡è¨Šæ•´åˆ

åœ¨èª¿è©¦é¢æ¿ä¸­é¡¯ç¤ºï¼š
- ç•¶å‰åç§»å€¼
- é€Ÿåº¦å€çŽ‡
- èª¿æ•´å¾Œçš„å¯¦éš›æ™‚é–“è¨ˆç®—
- åŽŸå§‹æ™‚é–“ vs èª¿æ•´å¾Œæ™‚é–“å°æ¯”

## ðŸ”§ æ•´åˆé»ž

### 1. VideoPlayer çµ„ä»¶æ•´åˆ
- ç‹€æ…‹ç®¡ç†: `subtitleTiming` state
- æœ¬åœ°å­˜å„²åŒæ­¥
- å¿«æ·éµäº‹ä»¶ç›£è½
- èª¿æ•´å¾Œå­—å¹•æŸ¥æ‰¾é‚è¼¯

### 2. è¼”åŠ©å‡½æ•¸
- `getCurrentAdjustedSubtitle()`: æ ¹æ“šèª¿æ•´åƒæ•¸æŸ¥æ‰¾ç•¶å‰å­—å¹•
- `getAdjustedSubtitleTiming()`: è¨ˆç®—èª¿æ•´å¾Œçš„æ™‚é–“ç¯„åœ

## ðŸ’¡ ä½¿ç”¨å ´æ™¯

### 1. å­—å¹•å»¶é²ä¿®æ­£
- YouTube è‡ªå‹•ç”Ÿæˆå­—å¹•çš„å»¶é²
- ç¬¬ä¸‰æ–¹å­—å¹•æ–‡ä»¶çš„æ™‚é–“è»¸ä¸åŒ¹é…

### 2. èªžé€Ÿé©é…
- ä¸åŒèªžè¨€çš„èªªè©±é€Ÿåº¦å·®ç•°
- é…åˆè¦–é »å€é€Ÿæ’­æ”¾

### 3. å¤šèªžè¨€æ”¯æ´
- å¿«é€Ÿåˆ‡æ›ä¸åŒèªžè¨€å­—å¹•çš„æ™‚é–“è»¸
- ç‚ºæ¯ç¨®èªžè¨€ä¿å­˜ç¨ç«‹çš„èª¿æ•´è¨­å®š

## âœ… åŠŸèƒ½ç‰¹é»ž

1. **å³æ™‚ç”Ÿæ•ˆ**: èª¿æ•´ç«‹å³åæ˜ ï¼Œç„¡éœ€ç¢ºèª
2. **ç²¾ç¢ºæŽ§åˆ¶**: æ”¯æ´å°æ•¸é»žç²¾åº¦èª¿æ•´
3. **é›™é‡æ“ä½œ**: æ»‘æ¡¿ + æŒ‰éˆ•çš„æ“ä½œæ–¹å¼
4. **ç‹€æ…‹ä¿å­˜**: è‡ªå‹•ä¿å­˜å’Œæ¢å¾©è¨­å®š
5. **è¦–è¦ºæŒ‡ç¤º**: æ¸…æ™°çš„ç•¶å‰å€¼é¡¯ç¤º
6. **å¿«é€Ÿé‡è¨­**: ä¸€éµæ¢å¾©é è¨­å€¼

## ðŸš€ æœªä¾†å„ªåŒ–å»ºè­°

1. **é è¨­é…ç½®**: ç‚ºå¸¸è¦‹çš„å­—å¹•æºæä¾›é è¨­èª¿æ•´å€¼
2. **è‡ªå‹•æª¢æ¸¬**: ä½¿ç”¨ç®—æ³•è‡ªå‹•æª¢æ¸¬æœ€ä½³åŒæ­¥é»ž
3. **æ­·å²è¨˜éŒ„**: ä¿å­˜æ¯å€‹è¦–é »çš„èª¿æ•´æ­·å²
4. **é›²ç«¯åŒæ­¥**: è·¨è¨­å‚™åŒæ­¥ç”¨æˆ¶çš„èª¿æ•´è¨­å®š
5. **æ‰¹é‡æ‡‰ç”¨**: å°‡èª¿æ•´æ‡‰ç”¨åˆ°æ•´å€‹æ’­æ”¾åˆ—è¡¨

## ðŸ“ æ¸¬è©¦è¦é»ž

1. **åŸºæœ¬åŠŸèƒ½æ¸¬è©¦**
   - åç§»èª¿æ•´æ˜¯å¦æ­£ç¢ºç”Ÿæ•ˆ
   - é€Ÿåº¦èª¿æ•´æ˜¯å¦å½±éŸ¿å­—å¹•é¡¯ç¤º
   - é‡è¨­åŠŸèƒ½æ˜¯å¦æ¢å¾©é è¨­å€¼

2. **é‚Šç•Œæ¸¬è©¦**
   - æœ€å¤§/æœ€å°å€¼é™åˆ¶
   - æ¥µç«¯èª¿æ•´å€¼çš„è¡¨ç¾
   - å¿«é€Ÿé€£çºŒèª¿æ•´çš„ç©©å®šæ€§

3. **äº¤äº’æ¸¬è©¦**
   - å¿«æ·éµéŸ¿æ‡‰
   - æ»‘æ¡¿å’ŒæŒ‰éˆ•çš„åŒæ­¥
   - æœ¬åœ°å­˜å„²çš„æŒä¹…åŒ–

4. **å…¼å®¹æ€§æ¸¬è©¦**
   - ä¸åŒç€è¦½å™¨çš„è¡¨ç¾
   - å…¨èž¢å¹•æ¨¡å¼ä¸‹çš„åŠŸèƒ½
   - ç§»å‹•è¨­å‚™çš„è§¸æŽ§æ“ä½œ

## ðŸŽ‰ å¯¦ç¾æˆæžœ

æ­¤åŠŸèƒ½å·²å®Œæ•´å¯¦ç¾ä¸¦æ¸¬è©¦é€šéŽï¼Œç‚ºç”¨æˆ¶æä¾›äº†å¼·å¤§è€Œç›´è§€çš„å­—å¹•åŒæ­¥æŽ§åˆ¶èƒ½åŠ›ï¼Œé¡¯è‘—æå‡äº†è§€çœ‹é«”é©—ã€‚æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½å·²æ•´åˆåˆ°ä¸»æ’­æ”¾å™¨ä¸­ï¼Œä¸¦æä¾›äº†å®Œå–„çš„è¦–è¦ºå›žé¥‹å’Œä½¿ç”¨èªªæ˜Žã€‚